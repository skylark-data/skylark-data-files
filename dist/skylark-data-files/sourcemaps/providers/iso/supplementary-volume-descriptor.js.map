{"version":3,"sources":["providers/iso/supplementary-volume-descriptor.js"],"names":["define","FileError","ErrorCodes","misc","PrimaryOrSupplementaryVolumeDescriptor","JolietDirectoryRecord","[object Object]","data","super","this","type","EIO","escapeSequence","third","toString","_data","slice","idx","len","getJolietString"],"mappings":";;;;;;;AAAAA,QACI,mBACA,oBACA,SACA,+CACA,6BACD,SAAUC,EAAUC,EAAWC,EAAKC,EAAuCC,GAC1E,aAkCA,qBA9B4CD,EACxCE,YAAYC,GAER,GADAC,MAAMD,GACc,IAAhBE,KAAKC,OACL,MAAM,IAAIT,EAAUC,EAAWS,IAAK,4CAExC,MAAMC,EAAiBH,KAAKG,iBACtBC,EAAQD,EAAe,GAG7B,GAA0B,KAAtBA,EAAe,IAAqC,KAAtBA,EAAe,IAClC,KAAVC,GAA4B,KAAVA,GAA4B,KAAVA,EACrC,MAAM,IAAIZ,EAAUC,EAAWS,uEAAwEC,EAAeE,cAG9HR,OACI,MAAO,SAEXA,iBACI,OAAOG,KAAKM,MAAMC,MAAM,GAAI,KAEhCV,8BAA8BC,GAC1B,OAAO,IAAIF,EAAsBE,GAAO,GAE5CD,WAAWW,EAAKC,GACZ,OAAOf,EAAKgB,gBAAgBV,KAAKM,MAAOE,EAAKC","file":"../../../providers/iso/supplementary-volume-descriptor.js","sourcesContent":["define([\r\n    '../../file-error',\r\n    '../../error-codes',\r\n    \"./misc\",\r\n    \"./primary-or-supplementary-volume-descriptor\",\r\n    \"./joliet-directory-record\"\r\n], function (FileError,ErrorCodes,misc,PrimaryOrSupplementaryVolumeDescriptor,JolietDirectoryRecord) {\r\n    'use strict';\r\n    /**\r\n     * @hidden\r\n     */\r\n    class SupplementaryVolumeDescriptor extends PrimaryOrSupplementaryVolumeDescriptor {\r\n        constructor(data) {\r\n            super(data);\r\n            if (this.type() !== 2 /* SupplementaryVolumeDescriptor */) {\r\n                throw new FileError(ErrorCodes.EIO, `Invalid supplementary volume descriptor.`);\r\n            }\r\n            const escapeSequence = this.escapeSequence();\r\n            const third = escapeSequence[2];\r\n            // Third character identifies what 'level' of the UCS specification to follow.\r\n            // We ignore it.\r\n            if (escapeSequence[0] !== 0x25 || escapeSequence[1] !== 0x2F ||\r\n                (third !== 0x40 && third !== 0x43 && third !== 0x45)) {\r\n                throw new FileError(ErrorCodes.EIO, `Unrecognized escape sequence for SupplementaryVolumeDescriptor: ${escapeSequence.toString()}`);\r\n            }\r\n        }\r\n        name() {\r\n            return \"Joliet\";\r\n        }\r\n        escapeSequence() {\r\n            return this._data.slice(88, 120);\r\n        }\r\n        _constructRootDirectoryRecord(data) {\r\n            return new JolietDirectoryRecord(data, -1);\r\n        }\r\n        _getString(idx, len) {\r\n            return misc.getJolietString(this._data, idx, len);\r\n        }\r\n    }\r\n\r\n\r\n    return SupplementaryVolumeDescriptor;\r\n});"]}